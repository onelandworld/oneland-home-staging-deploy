"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[510],{2601:function(e,t,n){let i;n.d(t,{Q:function(){return eu},a:function(){return v},aY:function(){return ed},b:function(){return O},be:function(){return eh},bf:function(){return et},bj:function(){return _},c:function(){return F},d:function(){return V},e:function(){return J},f:function(){return $},g:function(){return X},h:function(){return N},j:function(){return Z},m:function(){return en},n:function(){return ei},o:function(){return ea},r:function(){return C},u:function(){return D}});var a=n(12109),r=n.n(a),c=n(6475),l=n(46973),o=n(67294),s=n(85893),u=n(47726),d=n(3471),h=n(18998),g=n(35039),f=n(9279),p=n(2177),y=n(44720);n(67023);let m={gatewayUrl:"https://ipfs.thirdwebcdn.com/ipfs/"};function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;return e?e.startsWith("ipfs://")?e.replace("ipfs://",t.gatewayUrl):e:void 0}async function v(e){if(!e)return;let t=r().getType(e);if(t)return t;let n=await fetch(e,{method:"HEAD"});if(n.ok&&n.headers.has("content-type"))return n.headers.get("content-type")||void 0}let w=(0,o.createContext)(void 0),A=(0,o.createContext)(void 0),b=e=>{let{value:t,children:n}=e,i=(0,o.useMemo)(()=>{if(!t)return;let e={...t,authUrl:t.authUrl?.replace(/\/$/,"")};return e},[t]);return(0,s.jsx)(A.Provider,{value:i,children:n})},I=(e,t)=>{try{return{...e,rpc:(0,c.bST)(e,t)}}catch(n){return e}};function S(e,t,n,i,a){let r=(0,o.useMemo)(()=>({thirdwebApiKey:n,alchemyApiKey:i,infuraApiKey:a}),[n,i,a]),c=(0,o.useMemo)(()=>e.map(e=>I(e,r)),[e,r]),l=(0,o.useMemo)(()=>t&&"string"!=typeof t&&"number"!=typeof t?I(t,r):t,[t,r]);return[c,l]}let T=(0,o.createContext)({chains:c.gL9}),P=e=>{let{value:t,children:n}=e;return(0,s.jsx)(T.Provider,{value:t,children:n})};function x(){return(0,o.useContext)(T)}let k={wallet:void 0,address:void 0,chainId:void 0,signer:void 0},L=(0,o.createContext)(k),W=e=>{let{signer:t,children:n}=e,{chains:i,thirdwebApiKey:a,alchemyApiKey:r,infuraApiKey:l}=x(),[u,d]=(0,o.useState)({...k,signer:t||void 0});return(0,o.useEffect)(()=>{d(e=>({...e,signer:t||void 0}))},[t]),(0,o.useEffect)(()=>{let e=t;return t?Promise.all([t.getAddress(),t.getChainId()]).then(n=>{let o,[s,u]=n,g=i.find(e=>e.chainId===u);if(g)try{o=(0,c.NXR)(g,{thirdwebApiKey:a,alchemyApiKey:r,infuraApiKey:l})}catch(f){}if(t===e){let p=new h.aX(t,{readonlySettings:o?{rpcUrl:o,chainId:u}:void 0});d({wallet:p,address:s,chainId:u,signer:t})}}).catch(e=>{}):d(k),()=>{e=void 0}},[t,a,r,l]),(0,s.jsx)(L.Provider,{value:u,children:n})};function E(){return(0,o.useContext)(L)}let M=(0,o.createContext)({}),K=e=>{let{sdkOptions:t={},storageInterface:n,supportedChains:i,activeChain:a,signer:r,children:l,thirdwebApiKey:u,infuraApiKey:d,alchemyApiKey:h}=e,g=(0,o.useMemo)(()=>a?"number"==typeof a?a:"string"==typeof a?i.find(e=>e.slug===a)?.chainId:a.chainId:i[0]?.chainId,[a,i]),f=(0,o.useMemo)(()=>{let e,a,r=g,l=i.find(e=>e.chainId===r);if(l||void 0===r||(console.warn(`The chainId ${r} is not in the configured chains, please add it to the ThirdwebProvider`),r=void 0),l&&l.rpc.length>0)try{let o=(0,c.NXR)(l,{thirdwebApiKey:u,infuraApiKey:d,alchemyApiKey:h});e={chainId:l.chainId,rpcUrl:o}}catch(s){}let f={readonlySettings:e,...t,supportedChains:i};if(r&&(a=new y.x9T(r,{...f,infuraApiKey:d,alchemyApiKey:h,thirdwebApiKey:u},n)),!a){if(i.length>0)r=i[0].chainId,a=new y.x9T(r,f,n);else{console.error("No chains configured, please pass a chain or chains to the ThirdwebProvider");return}}return a._chainId=r,a},[g,h,d,i,t,n,u]);(0,o.useEffect)(()=>{f&&f._chainId===g&&(r?f.updateSignerOrProvider(r):g&&f.updateSignerOrProvider(g))},[f,f?._chainId,r,g]);let p=(0,o.useMemo)(()=>({sdk:f&&f._chainId===g?f:void 0,_inProvider:!0}),[g,f]);return(0,s.jsx)(M.Provider,{value:p,children:l})},j=e=>{let{signer:t,children:n,queryClient:i,supportedChains:a,activeChain:r,thirdwebApiKey:l="fb52f0ca630bdd02f0d5210d9e8e3568272ac765dd0709272918eefb29d3ac9e",alchemyApiKey:d,infuraApiKey:h,...g}=e,f=(0,o.useMemo)(()=>a||c.gL9,[a]),[p,y]=S(f,r||f[0],l,d,h),m=(0,o.useMemo)(()=>{if(!y||"string"==typeof y||"number"==typeof y)return p;let e=[...p.filter(e=>e.chainId!==y.chainId),y];return e.filter((e,t,n)=>t===n.findIndex(t=>t.chainId===e.chainId))},[p,y]);return(0,s.jsx)(P,{value:{chains:m,thirdwebApiKey:l,alchemyApiKey:d,infuraApiKey:h},children:(0,s.jsx)(W,{signer:t,children:(0,s.jsx)(u.Q,{queryClient:i,children:(0,s.jsx)(K,{signer:t,supportedChains:m,thirdwebApiKey:l,alchemyApiKey:d,infuraApiKey:h,activeChain:y,...g,children:n})})})})};function _(){let{sdk:e}=function(){let e=(0,o.useContext)(M);return(0,p.Z)(e._inProvider,"useSDK must be called from within a ThirdwebProvider, did you forget to wrap your app in a <ThirdwebProvider />?"),e}();return e}function B(){let e=_();return e?._chainId}let Q="lastConnectedWallet",R=(0,o.createContext)(void 0);function U(e){let[t,n]=(0,o.useState)(void 0),[a,r]=(0,o.useState)("unknown"),[c,l]=(0,o.useState)();i||(i=e.createWalletStorage("coordinatorStorage"));let u=e.autoSwitch?e.activeChain:void 0,d=(0,o.useContext)(w),h=(0,o.useMemo)(()=>{let t=e.chains,n={chains:t,dappMetadata:e.dAppMeta};return{...n,chain:e.activeChain||e.chains[0],theme:d||"dark"}},[e.chains,e.dAppMeta,e.activeChain,d]),g=(0,o.useCallback)(e=>e.create(h),[h]);(0,o.useEffect)(()=>{c&&c.updateChains(e.chains)},[c,e.chains]);let f=(0,o.useCallback)(async(e,t)=>{let a={walletId:e.walletId,connectParams:t||h};try{await i.setItem(Q,JSON.stringify(a))}catch(c){console.error(c)}let o=await e.getSigner();n(o),l(e),r("connected")},[h]),p=(0,o.useCallback)(async e=>{let t=await i.getItem(Q);if(t)try{let n=JSON.parse(t);n.connectParams.chainId=e,await i.setItem(Q,JSON.stringify(n))}catch(a){console.error(`Error saving the last active chain: ${a}`)}},[]),y=(0,o.useCallback)(async e=>{if(!c)throw Error("No active wallet");await c.switchChain(e);let t=await c.getSigner();await p(e),n(t)},[c,p]),m=(0,o.useRef)(!1);(0,o.useEffect)(()=>{if(!m.current){if(!1===e.shouldAutoConnect){r("disconnected");return}c||"unknown"!==a||(m.current=!0,(async()=>{let t,n;let a=await i.getItem(Q);if(!a){r("disconnected");return}try{let c=JSON.parse(a);t=c.connectParams,n=c.walletId}catch(l){console.error(`Error parsing the last connected wallet: ${l}`)}if(!n){r("disconnected");return}let o=e.supportedWallets.find(e=>e.id===n);if(!o){r("disconnected");return}let s=g(o);try{r("connecting"),await s.autoConnect(t),f(s,t)}catch(u){throw i.removeItem(Q),r("disconnected"),u}})())}},[g,e.supportedWallets,f,e.shouldAutoConnect,c,a]);let C=(0,o.useCallback)(async function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[i,a]=t,c={chainId:u?.chainId,...a||{}},l=g(i);r("connecting");try{await l.connect(c),f(l,c)}catch(o){throw console.error(`Error connecting to wallet: ${o}`),r("disconnected"),o}},[g,f,u]),v=(0,o.useCallback)(async()=>{await i.removeItem(Q),r("disconnected"),n(void 0),l(void 0)},[]),A=(0,o.useCallback)(async()=>{if(!c){v();return}await c.disconnect(),v()},[c,v]);return(0,o.useEffect)(()=>{if(!c)return;let e=async()=>{let e=await c.getSigner();n(e)};return c.addListener("change",()=>{e()}),c.addListener("disconnect",()=>{v()}),()=>{c.removeListener("change"),c.removeListener("disconnect")}},[c,v]),(0,s.jsx)(R.Provider,{value:{disconnect:A,wallets:e.supportedWallets,connect:C,signer:t,activeWallet:c,connectionStatus:a,setConnectionStatus:r,createWalletInstance:g,createWalletStorage:e.createWalletStorage,switchChain:y,handleWalletConnect:f,activeChain:e.activeChain,chainToConnect:u},children:e.children})}function Z(){return(0,o.useContext)(R)}let O=e=>{let{createWalletStorage:t=l.c,...n}=e,{activeChain:i}=n,a=(0,o.useMemo)(()=>{if(!("object"==typeof i&&null!==i))return n.supportedChains||c.gL9;if(!n.supportedChains)return[...c.gL9,i];let e=n.supportedChains.find(e=>e.chainId===i.chainId);return e?n.supportedChains.map(e=>e.chainId===i.chainId?i:e):[...n.supportedChains,i]},[n.supportedChains,i]),[r,u]=S(a,n.activeChain||a[0],n.thirdwebApiKey,n.alchemyApiKey,n.infuraApiKey),d=(0,o.useMemo)(()=>"number"==typeof u?r.find(e=>e.chainId===u):"string"==typeof u?r.find(e=>e.slug===u):u,[u,r]),h=n.dAppMeta;return(0,s.jsx)(w.Provider,{value:n.theme,children:(0,s.jsx)(U,{chains:r,supportedWallets:n.supportedWallets,shouldAutoConnect:n.autoConnect,createWalletStorage:t,dAppMeta:h,activeChain:d,autoSwitch:n.autoSwitch,children:(0,s.jsx)(q,{queryClient:n.queryClient,sdkOptions:n.sdkOptions,supportedChains:r,activeChain:d,storageInterface:n.storageInterface,authConfig:n.authConfig,thirdwebApiKey:n.thirdwebApiKey,alchemyApiKey:n.alchemyApiKey,infuraApiKey:n.infuraApiKey,children:(0,s.jsx)(b,{value:n.authConfig,children:n.children})})})})},q=e=>{let{children:t,...n}=e,i=Z()?.signer;return(0,s.jsx)(j,{signer:i,...n,children:t})};function D(){let e=Z();return(0,p.Z)(e,"useWallet() hook must be used within a <ThirdwebProvider/>"),e.activeWallet}function N(){let e=Z();return(0,p.Z)(e,"useWallets() hook must be used within a <ThirdwebProvider/>"),e.wallets}function F(){let e=Z();return(0,p.Z)(e,"useConnect() hook must be used within a <ThirdwebProvider/>"),e.connect}function $(){let e=Z();return(0,p.Z)(e,"useDisconnect() hook must be used within a <ThirdwebProvider/>"),e.disconnect}function V(){let e=Z();return(0,p.Z)(e,"useConnectionStatus() must be used within a <ThirdwebProvider/>"),e.connectionStatus}function J(){let e=Z();return(0,p.Z)(e,"useCreateWalletInstance() must be used within a <ThirdwebProvider/>"),e.createWalletInstance}function X(){let e=Z();return(0,p.Z)(e,"useSwitchChain() must be used within a <ThirdwebProvider/>"),e.switchChain}let z="tw-cache";function H(e){return[z,...e.filter(e=>"string"!=typeof e||e!==z)]}function Y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.d,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return H(["contract",e,...t])}function G(e,t){return H(ee.network.active(t).concat(e))}let ee={auth:{user:()=>H(["user"])},network:{active:e=>H(["chainId",e])},wallet:{balance:(e,t,n)=>H(G(H(["balance",{walletAddress:t,tokenAddress:n}]),e))},contract:{read:(e,t)=>Y(e,["read",t]),type:e=>Y(e,["contract-type"]),compilerMetadata:e=>Y(e,["publish-metadata"]),typeAndCompilerMetadata:e=>Y(e,["contract-type-and-metadata"]),metadata:e=>Y(e,["metadata"]),extractFunctions:e=>Y(e,["extractFunctions"]),call:(e,t,n,i)=>Y(e,["call",t,n,i]),app:{get:e=>Y(e,["appURI"])},events:{getEvents:(e,t)=>Y(e,["events","getEvents",{eventName:t}]),getAllEvents:e=>Y(e,["events","getAllEvents"])},nft:{get:(e,t)=>Y(e,["get",{tokenId:t}]),balanceOf:(e,t,n)=>Y(e,["balanceOf",{owner:t,tokenId:n}]),query:{all:(e,t)=>Y(e,t?["query","all",t]:["query","all"]),totalCirculatingSupply:e=>Y(e,["query","totalCirculatingSupply"]),totalCount:e=>Y(e,["query","totalCount"]),owned:{all:(e,t)=>Y(e,["query","owned","all",t])}},drop:{getAllUnclaimed:(e,t)=>Y(e,t?["getAllUnclaimed",t]:["getAllUnclaimed"]),getAllClaimed:(e,t)=>Y(e,t?["getAllClaimed",t]:["getAllClaimed"]),totalUnclaimedSupply:e=>Y(e,["totalUnclaimedSupply"]),totalClaimedSupply:e=>Y(e,["totalClaimedSupply"]),revealer:{getBatchesToReveal:(e,t)=>Y(e,t?["getBatchesToReveal",t]:["getBatchesToReveal"])}}},token:{totalSupply:e=>Y(e,["totalSupply"]),decimals:e=>Y(e,["decimals"]),balanceOf:(e,t)=>Y(e,["balanceOf",{walletAddress:t}])},marketplace:{getListing:(e,t)=>Y(e,["getListing",{listingId:t}]),getAllListings:(e,t)=>Y(e,t?["getAllListings",t]:["getAllListings"]),getTotalCount:e=>Y(e,["getTotalCount"]),getActiveListings:(e,t)=>Y(e,t?["getActiveListings",t]:["getActiveListings"]),getBidBufferBps:e=>Y(e,["getBidBufferBps"]),auction:{getWinningBid:(e,t)=>Y(e,["auction","getWinningBid",{listingId:t}]),getWinner:(e,t)=>Y(e,["auction","getWinner",{listingId:t}])},directListings:{getAll:(e,t)=>Y(e,t?["getAllDirectListings",t]:["getAllDirectListings"]),getAllValid:(e,t)=>Y(e,t?["getAllValidDirectListings",t]:["getAllValidDirectListings"]),getListing:(e,t)=>Y(e,["getListing",{listingId:t}]),getTotalCount:e=>Y(e,["getTotalDirectListingsCount"])},englishAuctions:{getAll:(e,t)=>Y(e,t?["getAllEnglishAuctions",t]:["getAllEnglishAuctions"]),getAllValid:(e,t)=>Y(e,t?["getAllEValidEnglishAuctions",t]:["getAllEValidEnglishAuctions"]),getAuction:(e,t)=>Y(e,["getAuction",{auctionId:t}]),getWinningBid:(e,t)=>Y(e,["getWinningBid",{auctionId:t}]),getTotalCount:e=>Y(e,["getTotalEnglishAuctionsCount"])}}},extensions:{claimConditions:{getActive:(e,t,n)=>Y(e,t?["claimConditions","getActive",{tokenId:t},n]:["claimConditions","getActive",n]),getAll:(e,t,n)=>Y(e,t?["claimConditions","getAll",{tokenId:t},n]:["claimConditions","getAll",n]),getClaimerProofs:(e,t)=>Y(e,t?["claimConditions","getClaimerProofs",{tokenId:t}]:["claimConditions","getClaimerProofs"]),getClaimIneligibilityReasons:(e,t,n)=>Y(e,n?["claimConditions","getIneligibilityReasons",{tokenId:n},t]:["claimConditions","getIneligibilityReasons",t]),useActiveClaimConditionForWallet:(e,t,n)=>Y(e,n?["claimConditions","useActiveClaimConditionForWallet",{tokenId:n,walletAddress:t},,]:["claimConditions","getIneligibilityReasons",{walletAddress:t}])},sales:{getRecipient:e=>Y(e,["sales"])},royalties:{getDefaultRoyaltyInfo:e=>Y(e,["royalties"])},platformFees:{get:e=>Y(e,["platformFees"])},metadata:{get:e=>Y(e,["metadata"])},roles:{getAll:e=>Y(e,["roles"]),get:(e,t)=>Y(e,["roles",{role:t}])}}};function et(){return x().chains}function en(){return E().address}function ei(){return E().chainId}function ea(){let e=ei(),t=et(),n=(0,o.useMemo)(()=>t.find(t=>t.chainId===e),[e,t]),i=(0,o.useMemo)(()=>{if(!n)return c.gL9.find(t=>t.chainId===e)},[e,n]);return n||i}function er(e,t,n){let i=B(),a={...n,enabled:!!(i&&n?.enabled)};return(0,d.useQuery)(G(e,i),t,a)}async function ec(e,t){if(!e||!t)return null;try{return await t.resolveContractType(e)}catch(n){return console.error("failed to resolve contract type",n),"custom"}}let el={cacheKey:(e,t)=>G(ee.contract.type(e),t),useQuery:function(e){let t=_();return er(ee.contract.type(e),()=>ec(e,t),{cacheTime:1/0,staleTime:1/0,enabled:!!e&&!!t})},fetchQuery:ec};function eo(e,t){if(!e||!t)return null;try{return t.getPublisher().fetchCompilerMetadataFromAddress(e)}catch(n){return null}}let es={cacheKey:(e,t)=>G(ee.contract.compilerMetadata(e),t),useQuery:function(e){let t=_();return er(ee.contract.compilerMetadata(e),()=>eo(e,t),{cacheTime:1/0,staleTime:1/0,enabled:!!e&&!!t})},fetchQuery:eo};function eu(e,t){let n=_(),i=(0,d.useQueryClient)(),a=B(),r=en(),c=ei(),l=n?._constructedAt,o=er((0,u.n)(["contract-instance",e,{wallet:r,walletChainId:c,sdkTimestamp:l}]),async()=>{if((0,u.r)(e,"contract address is required"),(0,p.Z)(n,"SDK not initialized"),(0,p.Z)(a,"active chain id is required"),!t||"custom"===t){let r;let c=(0,g.g)(e);if(c)return n.getContract(e,c);let l=await i.fetchQuery(el.cacheKey(e,a),()=>el.fetchQuery(e,n),{cacheTime:1/0,staleTime:1/0});return"custom"===l&&(r=(await i.fetchQuery(es.cacheKey(e,a),()=>es.fetchQuery(e,n),{cacheTime:1/0,staleTime:1/0,retry:0}))?.abi),(0,p.Z)(l,"failed to resolve contract type"),n.getContract(e,r||l)}return n.getContract(e,t)},{keepPreviousData:!0,cacheTime:1/0,staleTime:1/0,enabled:!!e&&!!n&&!!a,retry:0});return{...o,data:o.data,contract:o.data}}function ed(){let e=(0,o.useContext)(A),{data:t,isLoading:n}=(0,d.useQuery)(ee.auth.user(),async()=>{(0,p.Z)(e,"Please specify an authConfig in the ThirdwebProvider"),(0,p.Z)(e.authUrl,"Please specify an authUrl in the authConfig.");let t=await e.secureStorage?.getItem("auth_token_storage_key"),n={credentials:"include",...t?{headers:{Authorization:`Bearer ${t}`}}:{}},i=await fetch(`${e.authUrl}/user`,n);return await i.json()},{enabled:!!e});return{user:t,isLoggedIn:!!t,isLoading:n}}function eh(){return E().signer}}}]);